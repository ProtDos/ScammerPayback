const requestOptions={method:"GET",redirect:"follow"},usdInput=document.getElementById("amtUSD"),btcInput=document.getElementById("amtBTC");let amtBTC=btcInput.value;const CoinInput=document.getElementById("selected-coin"),CurrencyInput=document.getElementById("selected-currency");let coinName=CoinInput.options[CoinInput.selectedIndex].value,currencyName=CurrencyInput.options[CurrencyInput.selectedIndex].value,cryptoRate={bitcoin:0,ethereum:0,ripple:0,monero:0,litecoin:0,"bitcoin-cash":0},fiat_currency_rates={};function bitconFetchCoinRate(e){fetch("https://api.coincap.io/v2/assets?ids=bitcoin,ethereum,ripple,bitcoin-cash,litecoin,monero",requestOptions).then(e=>e.text()).then(t=>{const n=JSON.parse(t);n.data&&(n.data.forEach(e=>{cryptoRate[e.id]=parseFloat(e.priceUsd)}),bitcoinFetchCurrencyRate(e))}).catch(e=>console.log("error",e))}function bitconCalcualteCoinRate(e,t,n){const c=t*cryptoRate[e];let o=c;if("USD"!==n){o=c*fiat_currency_rates[n]}usdInput.value=o.toFixed(2)}function bitcoinFetchCurrencyRate(e){fetch("https://api.coincap.io/v2/rates",requestOptions).then(e=>e.text()).then(t=>{return JSON.parse(t).data.forEach((e,t)=>{if("fiat"===e.type){let t=parseFloat(e.rateUsd);t<=1?(t=1/t,fiat_currency_rates[e.symbol]=t):fiat_currency_rates[e.symbol]=t}}),e(coinName,amtBTC,currencyName),fiat_currency_rates}).catch(e=>console.log("error",e))}function bitconCalculateOnCryptoChange(e){amtBTC=btcInput.value,currencyName=CurrencyInput.options[CurrencyInput.selectedIndex].value,bitconCalcualteCoinRate(e,amtBTC,currencyName)}function bitconCalculateOnCurrencyChange(e){amtBTC=btcInput.value,bitconCalcualteCoinRate(coinName=CoinInput.options[CoinInput.selectedIndex].value,amtBTC,e)}function titleCase(e){for(var t=e.toLowerCase().split(" "),n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].substring(1);return t.join(" ")}bitconFetchCoinRate(bitconCalcualteCoinRate),$("#amtBTC").bind("change paste keyup",function(){coinName=CoinInput.options[CoinInput.selectedIndex].value,currencyName=CurrencyInput.options[CurrencyInput.selectedIndex].value;const e=$(this).val();bitconCalcualteCoinRate(coinName,e,currencyName)});